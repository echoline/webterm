#!/bin/rc

fn sigint {
	echo -n > /dev/innerHTML
	label $"l
}

id=`{ cat /dev/winid }
l=`"{ cat /dev/label }

if (! ~ $#* 1) {
	echo usage: himg file/url
	exit
}

{
	echo -n '<img style="max-width:100%; max-height:100%;" src="'
	if (~ $"1 http://* https://*)
		echo -n $"1
	if not
		echo -n 'data:text/css;base64,'^`{ enc64 < $"1 }
	echo '"/>'
} > /dev/innerHTML
label $"1
cat

