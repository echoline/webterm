#!/bin/rc

fn sigint {
	echo -n > /dev/innerHTML
	label $id
	echo 'win('^$id^').terminal.focus()' > /dev/js
}

id=`{ cat /dev/winid }

if (~ $#* 1) {
	{
	echo -n '<img style="max-width:100%; max-height:100%;" src="'
	if (~ $1 http://* https://*)
		echo -n $1
	if not
		echo -n 'data:text/css;base64,'^`{ enc64 < $1 }
	echo '"/>'
	} > /dev/innerHTML
	label $1
	echo 'win('^$id^').bg.focus()' > /dev/js
	cat
}
if not
	echo usage: himg file/url

