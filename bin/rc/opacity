#!/bin/rc

fn usage {
	echo usage: opacity [-1] 0.0-1.0
	exit
}

one=0

if (test $#* -lt 1)
	usage

if (~ $1 -1) {
	one=1
	shift
}

if (! ~ $#* 1)
	usage

if (! { echo $1 | grep -s '^(0|0?(\.[0-9])[0-9]*|1(\.[0]+)?)$' })
	usage

if (~ $one 1)
	echo opacity $1 > /dev/wctl
if not
	rc -c 'for (w in /dev/hsys/*/wctl) { echo opacity '^$1^' > $w }' >[2] /dev/null
